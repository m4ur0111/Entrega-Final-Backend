<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {{!-- Link de Font Awesome --}}
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    {{!-- Link de Google Fonts --}}
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Comme:wght@100;200;300;400;500;600;700;800;900&family=Montserrat:wght@100;200;300;400;500;600;700&display=swap" rel="stylesheet">
    {{!-- Estilos CSS --}}
    <link rel="stylesheet" href="./styles/products.css">
    <title>Productos</title>
</head>
<body>
    {{!< layouts/main }}

        <header>
            <nav class="navbar">
                <div class="navbar-left">
                    <p class="navbar-text"><a href="/" class="navbar-logo">Tienda Tecnologica</a></p>
                </div>
                <div class="navbar-right">
                    <a href="/" class="navbar-link">Inicio</a>
                    <a href="/products" class="navbar-link">Productos</a>
                    <a href="/cart" class="navbar-link cart-link">
                        <i class="fas fa-shopping-cart"></i> <!-- Icono de carrito -->
                        Carrito
                    </a>
                    <a href="/logout" class="navbar-link logout-link">
                        <span class="icon">&#128274;</span> Cerrar Sesión
                    </a>
                </div>
            </nav>
        </header>

    <h1>Listado de Productos</h1>

    <!-- Agrega botones para la paginación y filtros -->
    <div class="pagination-controls">
        <button onclick="changePage(1)">Primera</button>
        <button onclick="changePage({{pagination.prevPage}})">Anterior</button>
        <span class="current-page">Página {{pagination.page}} de {{pagination.totalPages}}</span>
        <button onclick="changePage({{pagination.nextPage}})">Siguiente</button>
        <button onclick="changePage({{pagination.totalPages}})">Última</button>
    </div>

    <!-- Agrega un formulario para los filtros con estilos -->
    <form id="filter-form" class="filter-form">
        <div class="filter-options">
            <select name="sort" class="filter-select">
            <option value="asc">Ordenar Ascendente</option>
            <option value="desc">Ordenar Descendente</option>
            </select>
            <input type="text" name="query" class="filter-input" placeholder="Buscar por categoría">
            <input type="number" name="minPrice" class="filter-input" placeholder="Precio mínimo">
            <input type="number" name="maxPrice" class="filter-input" placeholder="Precio máximo">
        </div>
        <button type="submit" class="filter-button">Filtrar</button>
    </form>

    {{#if productos.length}}
        <div class="productos">
            {{#each productos}}
            <div class="producto">
                <img class="producto-imagen" src="{{imagen}}" alt="Imagen del producto">
                <div class="producto-info">
                    <h3 class="producto-nombre">{{nombre}}</h3>
                    <p class="producto-descripcion">{{descripcion}}</p>
                    <p class="producto-precio">Precio: ${{precio}}</p>
                    <p class="producto-categoria">Categoría: {{categoria}}</p>
                    {{!-- <button class="agregar-carrito" data-producto-id="{{_id}}">Agregar al carrito</button> --}}
                    <a href="/product/{{_id}}" class="product-detail-link">Ver Detalles</a>
                    {{#if ../isAdmin}}
                        <button class="editar-producto" data-producto-id="{{_id}}"><a href="/product/edit/{{_id}}" class="editar-producto">Editar Producto</a></button>
                    {{/if}}
                </div>
            </div>
            {{/each}}
        </div>
    {{else}}
    <p>No se encontraron productos disponibles.</p>
    {{/if}}

    <!-- Agrega botones para la paginación y filtros -->
    <div class="pagination-controls">
        <button onclick="changePage(1)">Primera</button>
        <button onclick="changePage({{pagination.prevPage}})">Anterior</button>
        <span class="current-page">Página {{pagination.page}} de {{pagination.totalPages}}</span>
        <button onclick="changePage({{pagination.nextPage}})">Siguiente</button>
        <button onclick="changePage({{pagination.totalPages}})">Última</button>
    </div>

    
    <script src="./js/filter.js"></script>
</body>
</html>